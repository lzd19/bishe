{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"show\",\n  // components: {\n  //     SealAvatar,\n  // },\n  props: {\n    msg: String\n  },\n  data() {\n    return {\n      taskId: 0,\n      process: {},\n      formValues: {},\n      processRecordList: [],\n      isApprove: false\n    };\n  },\n  created() {\n    this.taskId = this.$route.query.taskId;\n    let id = this.$route.query.id;\n    this.fetchData(id);\n  },\n  methods: {\n    fetchData(id) {\n      this.$request.get('/processApiController/show/' + id).then(res => {\n        this.process = res.data.process;\n        this.formValues = JSON.parse(res.data.processTemplate.formProps);\n        console.log(this.formValues);\n        console.log(this.process);\n        console.log(res.data.processRecordList);\n        this.processRecordList = res.data.processRecordList;\n        this.isApprove = res.data.isApprove;\n      });\n    },\n    approve(status) {\n      let approvalVo = {\n        processId: this.process.id,\n        taskId: this.taskId,\n        status: status\n      };\n      this.$request({\n        url: '/processApiController/approve',\n        method: 'POST',\n        data: approvalVo\n      }).then(res => {});\n      this.$router.push('list');\n    }\n  }\n};","map":{"version":3,"names":["name","props","msg","String","data","taskId","process","formValues","processRecordList","isApprove","created","$route","query","id","fetchData","methods","$request","get","then","res","JSON","parse","processTemplate","formProps","console","log","approve","status","approvalVo","processId","url","method","$router","push"],"sources":["src/views/manager/Show.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <van-nav-bar\r\n            title=\"审批详情\"\r\n            left-text=\"返回\"\r\n            left-arrow\r\n            @click-left=\"() => $router.back()\"\r\n        />\r\n        <van-list>\r\n            <van-cell>\r\n                <template slot=\"default\">\r\n                    <div class=\"header-warp\">\r\n                        <h4>{{ process.title }}</h4>\r\n                        <p>{{ process.createTime }}</p>\r\n                        <span class=\"pass\" v-if=\"process.status === 1\">审批中</span>\r\n                        <div class=\"seal-wrap\" v-if=\"process.status === 2\">\r\n                            <seal-avatar></seal-avatar>\r\n                        </div>\r\n                        <div class=\"seal-wrap\" v-if=\"process.status === -1\">\r\n                            <seal-avatar title=\"已拒绝\" color=\"#EB8473\"></seal-avatar>\r\n                        </div>\r\n                    </div>\r\n                </template>\r\n            </van-cell>\r\n            <van-cell>\r\n                <template slot=\"default\">\r\n                    <div class=\"detail-wrap\">\r\n                        <div class=\"item\" :key=\"key.id\" v-for=\"(value,key) in formValues\">\r\n                            <h5>{{ value.title }}</h5>\r\n                            <p v-html=\"key.value\"></p>\r\n                        </div>\r\n                    </div>\r\n                </template>\r\n            </van-cell>\r\n\r\n            <van-cell>\r\n                <template slot=\"default\">\r\n                    <div class=\"result\">\r\n                        <h3>流程</h3>\r\n                        <van-steps direction=\"vertical\" :active=\"processRecordList.length - 1\">\r\n                            <van-step :key=\"item.id\" v-for=\"item in processRecordList\">\r\n                                <h4>{{ item.id }}</h4>\r\n                                <p>{{ item.description }}</p>\r\n                            </van-step>\r\n                        </van-steps>\r\n\r\n                    </div>\r\n                </template>\r\n            </van-cell>\r\n        </van-list>\r\n\r\n        <div class=\"notice\" v-if=\"taskId != 0\">\r\n            <van-icon name=\"bullhorn-o\" />\r\n            <p>{{ process.title }}</p>\r\n            <span class=\"pass\">{{ process.status === 1 ? '审批中' : process.status === 2 ? '审批通过' : '审批拒绝' }}</span>\r\n        </div>\r\n\r\n        <el-button type=\"success\" @click=\"approve(1)\" style=\"margin-top: 20px\">同意</el-button>\r\n        <el-button type=\"danger\" @click=\"approve(-1)\">拒绝</el-button>\r\n        <div class=\"footer\" v-if=\"isApprove\">\r\n            <div class=\"left-action\">\r\n                <div class=\"action back\" @click=\"() => $router.back()\">\r\n                    <van-icon name=\"revoke\" />\r\n                    <span>返回</span>\r\n                </div>\r\n            </div>\r\n<!--            <div class=\"right-button\">-->\r\n<!--                <van-button @click=\"approve(-1)\" type=\"default\" size=\"small\">审批拒绝</van-button>-->\r\n<!--                <span style=\"margin: 0 4px\"></span>-->\r\n<!--                <van-button @click=\"approve(1)\" type=\"info\" size=\"small\">审批通过</van-button>-->\r\n<!--            </div>-->\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: \"show\",\r\n    // components: {\r\n    //     SealAvatar,\r\n    // },\r\n    props: {\r\n        msg: String\r\n    },\r\n    data() {\r\n        return {\r\n            taskId: 0,\r\n            process: {},\r\n            formValues: {},\r\n            processRecordList: [],\r\n            isApprove: false\r\n        };\r\n    },\r\n    created(){\r\n        this.taskId = this.$route.query.taskId;\r\n        let id = this.$route.query.id;\r\n        this.fetchData(id);\r\n    },\r\n    methods: {\r\n        fetchData(id) {\r\n            this.$request.get('/processApiController/show/'+id).then(res=>{\r\n                this.process = res.data.process\r\n                this.formValues = JSON.parse(res.data.processTemplate.formProps)\r\n                console.log(this.formValues)\r\n                console.log(this.process)\r\n                console.log(res.data.processRecordList)\r\n                this.processRecordList = res.data.processRecordList\r\n                this.isApprove = res.data.isApprove\r\n            })\r\n        },\r\n        approve(status) {\r\n            let approvalVo = {\r\n                processId: this.process.id,\r\n                taskId: this.taskId,\r\n                status: status\r\n            }\r\n            this.$request({\r\n                url:'/processApiController/approve',\r\n                method:'POST',\r\n                data: approvalVo\r\n            }).then(res=>{})\r\n            this.$router.push('list')\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n    padding-bottom: 86px;\r\n    .header-warp {\r\n        position: relative;\r\n        h4 {\r\n            font-size: 16px;\r\n            margin: 5px;\r\n        }\r\n        p {\r\n            font-size: 16px;\r\n            margin: 5px;\r\n        }\r\n        .pass {\r\n            color: #4CB971;\r\n            margin: 5px;\r\n        }\r\n        .refused {\r\n            color: #EB8473;\r\n            margin: 5px;\r\n        }\r\n    }\r\n    .detail-wrap {\r\n        .item {\r\n            h5 {\r\n                color: #838485;\r\n                margin: 5px;\r\n            }\r\n            p {\r\n                color: #1B1F22;\r\n                font-size: 16px;\r\n                margin: 5px;\r\n            }\r\n        }\r\n    }\r\n    .result {\r\n        font-size: 14px;\r\n        h4, p {\r\n            margin: 5px;\r\n            font-size: 14px;\r\n        }\r\n    }\r\n    .seal-wrap {\r\n        position: absolute;\r\n        top: 20px;\r\n        right: 30px;\r\n    }\r\n\r\n    .notice {\r\n        display: flex;\r\n        align-items: center;\r\n        width: 100%;\r\n        font-size: 12px;\r\n        padding: 8px 10px;\r\n        background: #FEFBE8;\r\n        position: fixed;\r\n        bottom: 53px;\r\n        z-index: 10;\r\n        p {\r\n            flex: 1;\r\n            margin: 4px;\r\n        }\r\n        .pass {\r\n            color: #07c160;\r\n            margin-right: 20px;\r\n        }\r\n    }\r\n    .footer {\r\n    /*// height: 50px;*/\r\n        padding: 10px;\r\n        background: #F8F8F8;\r\n        display: flex;\r\n        align-items: center;\r\n        position: fixed;\r\n        width: 100%;\r\n        bottom: 0;\r\n        z-index: 10;\r\n        .left-action {\r\n            flex: 1;\r\n            .action {\r\n                display: flex;\r\n                flex-direction: column;\r\n                justify-content: center;\r\n                align-items: center;\r\n\r\n                span {\r\n                    font-size: 12px;\r\n                    color: #838485;\r\n                }\r\n            }\r\n        }\r\n\r\n        .right-button {\r\n            margin-right: 20px;\r\n        }\r\n    }\r\n}\r\n\r\n/deep/ .van-cell {\r\n    position: inherit;\r\n    overflow: visible;\r\n}\r\n\r\n/deep/ .van-cell__value{\r\n    position: inherit;\r\n    overflow: visible;\r\n}\r\n</style>"],"mappings":";AA2EA;EACAA,IAAA;EACA;EACA;EACA;EACAC,KAAA;IACAC,GAAA,EAAAC;EACA;EACAC,KAAA;IACA;MACAC,MAAA;MACAC,OAAA;MACAC,UAAA;MACAC,iBAAA;MACAC,SAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAL,MAAA,QAAAM,MAAA,CAAAC,KAAA,CAAAP,MAAA;IACA,IAAAQ,EAAA,QAAAF,MAAA,CAAAC,KAAA,CAAAC,EAAA;IACA,KAAAC,SAAA,CAAAD,EAAA;EACA;EACAE,OAAA;IACAD,UAAAD,EAAA;MACA,KAAAG,QAAA,CAAAC,GAAA,iCAAAJ,EAAA,EAAAK,IAAA,CAAAC,GAAA;QACA,KAAAb,OAAA,GAAAa,GAAA,CAAAf,IAAA,CAAAE,OAAA;QACA,KAAAC,UAAA,GAAAa,IAAA,CAAAC,KAAA,CAAAF,GAAA,CAAAf,IAAA,CAAAkB,eAAA,CAAAC,SAAA;QACAC,OAAA,CAAAC,GAAA,MAAAlB,UAAA;QACAiB,OAAA,CAAAC,GAAA,MAAAnB,OAAA;QACAkB,OAAA,CAAAC,GAAA,CAAAN,GAAA,CAAAf,IAAA,CAAAI,iBAAA;QACA,KAAAA,iBAAA,GAAAW,GAAA,CAAAf,IAAA,CAAAI,iBAAA;QACA,KAAAC,SAAA,GAAAU,GAAA,CAAAf,IAAA,CAAAK,SAAA;MACA;IACA;IACAiB,QAAAC,MAAA;MACA,IAAAC,UAAA;QACAC,SAAA,OAAAvB,OAAA,CAAAO,EAAA;QACAR,MAAA,OAAAA,MAAA;QACAsB,MAAA,EAAAA;MACA;MACA,KAAAX,QAAA;QACAc,GAAA;QACAC,MAAA;QACA3B,IAAA,EAAAwB;MACA,GAAAV,IAAA,CAAAC,GAAA;MACA,KAAAa,OAAA,CAAAC,IAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}